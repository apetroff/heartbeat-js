<html>
    <head>
        <script language="javascript" src="/health/jquery-1.7.2.min.js"></script>
        <style>
            .monitor-false {background-color:red}
            .monitor-true {background-color:green}
            </style>
        <script language="javascript">
            function runMonitorUpdate()
            {
                jQuery.ajax({
                            type:'POST',
                            timeout: 5000,
                            url: 'http://health.local:50088/entity/health/list.json',
                            error: function(XMLHttpRequest, textStatus, errorThrown) {
                                $('#errorMsg').text('AHTUNG! AJAX error happened!');
                            },
                            success: function(data, textStatus, jqXHR){
                                updateMonitorData(data);
                                $('#errorMsg').text('');
                            }
                });
            }
            
            function init()
            {
                setInterval(runMonitorUpdate, 1000);
            }
            
            function updateMonitorData(responseObj)
            {
                jQuery('#monitor').html('');
                monitorData = responseObj.monitorData;
                jQuery.each(monitorData, function(key)
                {
                    sid = monitorData[key].sid;
                    status = monitorData[key].status;
                    
                    statusDiv = jQuery(sid);
                            console.log();
                    if(jQuery(sid).length == 0)
                    {
                            jQuery('<div/>')
                            .css({
                                    'width':'45%',
                                    'height':'45%',
                                    'float':'left',
                                    'text-align':'center'
                            })
                            .addClass('monitor-'+status)
                            .attr('id',sid)
                            .html(status)
                            .appendTo('#monitor');
                            
                    } 
                    else
                    {
                        statusDiv.className='monitor-'+status;
                        statusDiv.innerHTML = status;
                    }
                });
            }
            
            $(document).ready(function(){
                init();
            });
            </script>

    </head>
    <body>
        <div id="errorMsg" style="width: 100%; text-align:center;color:blue"></div>
        <div id="monitor" style="width: 100%; text-align:center;"></div>
    </body>
</html>